{% extends "base.html" %}

{% block content %}
<div class="row">
    <p>We are a group of developers aiming to enrich peoples lives through open source development.</p>
    <p>We have big plans and are building our vision of an ideal, developer-friendly application
        environment. As such, we have a lot of repositories, and unless you're following closely <a
            href="https://discord.khonsulabs.com/">on our Discord</a> or <a href="https://community.khonsulabs.com/">our
            forums</a>, it can be hard to see everything we're
        working on and understand how it fits into the bigger picture.</p>
    <p>Below is a feed of our activity. Next to the repository name will be an Info icon that will open a short summary
        about the repository and why we're working on it. If a repository doesn't have extra information, and you want
        to know more
        about it, please file <a
            href="https://github.com/khonsulabs/projects/issues/new?title=More+information+requested+for+REPOSITORY">an
            issue.</a></p>
</div>
<hr />
<div class="row">
    {% for day in days %}
    <h3 class="text-center">{{ day.display }}</h3>
    {% for repository, summary in day.repositories %}
    <h4>
        {% if summary.forked_from %}
        {{ summary.forked_from }} (forked)
        {% else %}
        {{ repository }}
        {% endif %}
        {% if projects[repository] %}
        <a data-bs-toggle="modal" data-bs-target="#{{repository}}" href="#">
            <i class="bi bi-info-circle-fill"></i>
        </a>
        {% endif %}
        <a href="{{ summary.url }}">
            <i class="bi bi-github"></i>
        </a>
    </h4>

    {% for issue in summary.issues_closed %}
    <p>
        <img src="/static/checkmark-circle.svg" class="icon" /> Issue <a href="{{ issue.url }}">#{{ issue.id
            }}</a>
        was closed:
        {{issue.title}}
    </p>
    {% endfor %}

    {% for login, head in summary.commit_authors %}
    {% for head, count in head %}
    <p>
        <img src="/static/github-original.svg" class="icon" />
        <a href="https://github.com/{{login}}">@{{login}}</a>
        pushed <a href="https://github.com/khonsulabs/{{ repository }}/commits/{{head}}?author={{ login }}">
            to branch <code>{{head}}</code>.</a>
    </p>

    {% endfor %}
    {% endfor %}
    {% endfor %}
    <hr />
    {% endfor %}
</div>

{% endblock content %}

{% block scripts %}
{% for repo, project in projects %}
<div class="modal fade" id="{{ repo }}" tabindex="-1" aria-labelledby="{{ repo }}-label" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="{{ repo }}-label">{{ project.name }}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p class="project-tagline">{{ project.tagline }}</p>
                {{ project.description | safe }}
                <div class="btn-group d-block">
                    {% if project.homepage %}
                    <a href="{{ project.homepage }}" class="btn btn-outline-primary"><i class="bi bi-house"></i>
                        Homepage</a>
                    {% endif %}
                    <a href="{{ project.repository }}" class="btn btn-outline-primary">
                        <i class="bi bi-github"></i> Source Code</a>
                    <a href="{{ project.documentation }}" class="btn btn-outline-primary"><i
                            class="bi bi-journal-code"></i>
                        Documentation</a>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
{% endfor %}
{% endblock scripts %}